# О проекте

Текущий репозиторий входит в часть проекта по backend-разработке цифровой информационной системы для работы с многоязычными текстами деловой документации.
Ниже представлены остальные репозитории этого проекта:
- [rgo-cloud-common](https://github.com/evgeny-mordyasov/rgo-cloud-common) предназначен для общей кодовой базы двух микросервисов.
- [rgo-cloud-security](https://github.com/evgeny-mordyasov/rgo-cloud-security) предназначен для общих процессов управления регистрации и аутентификации пользователей.
- [rgo-cloud-docs](https://github.com/evgeny-mordyasov/rgo-cloud-docs) микросервис работы документов.
- [rgo-cloud-authentication](https://github.com/evgeny-mordyasov/rgo-cloud-authentication) микросервис управления регистрацией и аутентификации пользователей.

## Описание репозитория

Репозиторий rgo-cloud-db необходим для наката мануальных и миграционных скриптов на базу данных PostgreSQL с помощью инструмента Flyway.
В данном примере мануальные скрипты накатываются автоматически, потому что репозиторий используется для инициализации базы данных, а не для ее дальнейшего обслуживания и обновления.
В любом случае создание данной функции не слишком сложно, поэтому мы можем пропустить этот шаг, поскольку он не является основным.
Опишем папки/файлы этого репозитория:
- rgo-cloud-db-auth-migration содержит мануальные и миграционные скрипты для базы данных пользователей.
- rgo-cloud-db-docs-migration содержит мануальные и миграционные скрипты для базы данных документов.
- script содержит SQL-скрипт, создающий две базы данных. Это связано с тем, что нативные скрипты PostgreSQL позволяют создать только одну базу данных.
- Dockerfile создает образ на основе образа postgres:14, предварительно настраивая окружение PostgreSQL.
- docker-compose.yml позволяет инициализировать базу данных мануальными и миграционными скриптами.

## Использование

Для создания и инициализации баз данных необходимо воспользоваться следующей командой, находясь в той же директории, где и сам файл docker-compose.yml:
```
docker compose up
```

Учетные данные для баз данных Вы можете указать в следующих файлах:
- [База данных auth](https://github.com/evgeny-mordyasov/rgo-cloud-db/blob/dev/rgo-cloud-db-auth-migration/src/main/resources/flyway/config/manual/flyway.conf)
- [База данных docs](https://github.com/evgeny-mordyasov/rgo-cloud-db/blob/dev/rgo-cloud-db-docs-migration/src/main/resources/flyway/config/manual/flyway.conf)
